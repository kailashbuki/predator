{% extends "basic.html" %}

{% set active_page = 'users' %}

{% block title %}Create a new user{% endblock %}

{% block content %}

{% for cat, msg in get_flashed_messages(with_categories=true) %}
    {% if msg %}
    <div class="alert-message {{ cat }} fade in">
        <a class="close" href="#">x</a>
        <p>{{ msg }}</p>
    </div>
    {% endif %}
{% endfor %}

    
<form method="post">
    <div class="clearfix {% if form.username.errors %}error{% endif %}">
        <label for="username">Username</label>
        <div class="input">
            <input class="xlarge" id="xlInput" name="username" size="30" value="{{ form.username.data }}" type="text">
            <span class="help-inline">{% if form.username.errors %}{% for error in form.username.errors: %}  {{error}}  {% endfor %}{% endif %}</span>
        </div>
    </div>

    <div class="clearfix {% if form.password.errors %}error{% endif %}">
        <label for="password">Password</label>
        <div class="input">
            <input class="xlarge" id="xlInput" name="password" size="30" type="password">
            <span class="help-inline">{% if form.password.errors %}{% for error in form.password.errors: %}  {{error}}  {% endfor %}{% endif %}</span>
        </div>
    </div>

    <div class="clearfix {% if form.password.errors %}error{% endif %}">
        <label for="confirm_password">Re-enter Password</label>
        <div class="input">
            <input class="xlarge" id="xlInput" name="confirm_password" size="30" type="password">
        </div>
    </div>

    <div class="clearfix {% if form.email.errors %}error{% endif %}">
        <label for="email">Email</label>
        <div class="input">
            <input class="xlarge" id="xlInput" name="email" size="30" value="{{ form.email.data }}" type="text">
            <span class="help-inline">{% if form.email.errors %}{% for error in form.email.errors: %} {{error}} {% endfor %}{% endif %}</span>
        </div>
    </div>
    
    <div class="clearfix {% if form.fullname.errors %}error{% endif %}">
        <label for="fullname">Full Name</label>
        <div class="input">
            <input class="xlarge" id="xlInput" name="fullname" value="{{ form.fullname.data }}" size="30" type="text">
            <span class="help-inline">{% if form.fullname.errors %}{% for error in form.fullname.errors: %} {{error}} {% endfor %}{% endif %}</span>
        </div>
    </div>
    <div style="padding-left: 150px;"><input class="btn primary" type="submit" value="Create user"/></div>
</form>
{% endblock %}

{% block js %}
    {{ super() }}
    <script type='text/javascript'>
        $(function(){
            $(".alert-message").alert();
        });
        
        $('.close').bind('click', function (e) {
            $(".alert-message").alert('close');
        });
    </script>
{% endblock %}